<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="耿直的一Boy">
<meta property="og:type" content="website">
<meta property="og:title" content="lly's Blog">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="lly's Blog">
<meta property="og:description" content="耿直的一Boy">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="lly's Blog">
<meta name="twitter:description" content="耿直的一Boy">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/page/2/"/>

  <title> lly's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">lly's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">用心记录点滴</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/08/UML类图中类的关系/" itemprop="url">
                  UML类图中类的关系
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-02-08T16:22:32+08:00" content="2017-02-08">
              2017-02-08
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/02/08/UML类图中类的关系/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/08/UML类图中类的关系/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="一、关联关系"><a href="#一、关联关系" class="headerlink" title="一、关联关系"></a>一、关联关系</h2><p>关联(Association)关系是类与类之间最常用的一种关系，它是一种结构化关系，用于表示一类对象与另一类对象之间有联系，如汽车和轮胎、师傅和徒弟、班级和学生等等。在UML类图中，用实线连接有关联关系的对象所对应的类，在使用Java、C#和C++等编程语言实现关联关系时，通常将一个类的对象作为另一个类的成员变量。在使用类图表示关联关系时可以在关联线上标注角色名，一般使用一个表示两者之间关系的动词或者名词表示角色名（有时该名词为实例对象名），关系的两端代表两种不同的角色，因此在一个关联关系中可以包含两个角色名，角色名不是必须的，可以根据需要增加，其目的是使类之间的关系更加明确。</p>
<h3 id="1-双向关联"><a href="#1-双向关联" class="headerlink" title="1.双向关联"></a>1.双向关联</h3><p>默认情况下，关联是双向的。例如：顾客(Customer)购买商品(Product)并拥有商品，反之，卖出的商品总有某个顾客与之相关联。因此，Customer类和Product类之间具有双向关联关系 如下图: </p>
<p><img src="http://ofy1hyquv.bkt.clouddn.com/%E5%8F%8C%E5%90%91%E5%85%B3%E8%81%94.jpg" alt=""></p>
<h3 id="2-单向关联"><a href="#2-单向关联" class="headerlink" title="2.单向关联"></a>2.单向关联</h3><p>类的关联关系也可以是单向的，单向关联用带箭头的实线表示。例如：顾客(Customer)拥有地址(Address)，则Customer类与Address类具有单向关联关系 如下图:</p>
<p><img src="http://ofy1hyquv.bkt.clouddn.com/%E5%8D%95%E5%90%91%E5%85%B3%E8%81%94.jpg" alt=""></p>
<h3 id="3-自关联"><a href="#3-自关联" class="headerlink" title="3.自关联"></a>3.自关联</h3><p>在系统中可能会存在一些类的属性对象类型为该类本身，这种特殊的关联关系称为自关联。例如：一个节点类(Node)的成员又是节点Node类型的对象<br>如下图：</p>
<p><img src="http://ofy1hyquv.bkt.clouddn.com/%E8%87%AA%E5%85%B3%E8%81%94.jpg" alt=""></p>
<h3 id="4-多重性关联"><a href="#4-多重性关联" class="headerlink" title="4.多重性关联"></a>4.多重性关联</h3><p>多重性关联关系又称为重数性(Multiplicity)关联关系，表示两个关联对象在数量上的对应关系。在UML中，对象之间的多重性可以直接在关联直线上用一个数字或一个数字范围表示。</p>
<p>对象之间可以存在多种多重性关联关系，常见的多重性表示方式如下所示：</p>
<p>表示方式<br>多重性说明</p>
<p>1..1<br>表示另一个类的一个对象只与该类的一个对象有关系</p>
<p>0..*<br>表示另一个类的一个对象与该类的零个或多个对象有关系</p>
<p>1..*<br>表示另一个类的一个对象与该类的一个或多个对象有关系</p>
<p>0..1<br>表示另一个类的一个对象没有或只与该类的一个对象有关系</p>
<p>m..n<br>表示另一个类的一个对象与该类最少m，最多n个对象有关系 (m≤n)</p>
<p>如下图</p>
<p><img src="http://ofy1hyquv.bkt.clouddn.com/%E5%A4%9A%E9%87%8D%E6%80%A7%E5%85%B3%E8%81%94.jpg" alt=""></p>
<h3 id="5-聚合关系"><a href="#5-聚合关系" class="headerlink" title="5.聚合关系"></a>5.聚合关系</h3><p>聚合(Aggregation)关系表示整体与部分的关系。在聚合关系中，成员对象是整体对象的一部分，但是成员对象可以脱离整体对象独立存在。在UML中，聚合关系用带空心菱形的直线表示。例如：汽车发动机(Engine)是汽车(Car)的组成部分，但是汽车发动机可以独立存在，因此，汽车和发动机是聚合关系</p>
<p>如下图</p>
<p><img src="http://ofy1hyquv.bkt.clouddn.com/%E8%81%9A%E5%90%88%E5%85%B3%E7%B3%BB.jpg" alt=""></p>
<h3 id="6-组合关系"><a href="#6-组合关系" class="headerlink" title="6.组合关系"></a>6.组合关系</h3><p>组合(Composition)关系也表示类之间整体和部分的关系，但是在组合关系中整体对象可以控制成员对象的生命周期，一旦整体对象不存在，成员对象也将不存在，成员对象与整体对象之间具有同生共死的关系。在UML中，组合关系用带实心菱形的直线表示。例如：人的头(Head)与嘴巴(Mouth)，嘴巴是头的组成部分之一，而且如果头没了，嘴巴也就没了，因此头和嘴巴是组合关系</p>
<p>如下图</p>
<p><img src="http://ofy1hyquv.bkt.clouddn.com/%E7%BB%84%E5%90%88%E5%85%B3%E7%B3%BB.jpg" alt=""></p>
<h2 id="二、依赖关系"><a href="#二、依赖关系" class="headerlink" title="二、依赖关系"></a>二、依赖关系</h2><p>依赖(Dependency)关系是一种使用关系，特定事物的改变有可能会影响到使用该事物的其他事物，在需要表示一个事物使用另一个事物时使用依赖关系。大多数情况下，依赖关系体现在某个类的方法使用另一个类的对象作为参数。在UML中，依赖关系用带箭头的虚线表示，由依赖的一方指向被依赖的一方。例如：驾驶员开车，在Driver类的drive()方法中将Car类型的对象car作为一个参数传递，以便在drive()方法中能够调用car的move()方法，且驾驶员的drive()方法依赖车的move()方法，因此类Driver依赖类Car</p>
<p>如下图<br><img src="http://ofy1hyquv.bkt.clouddn.com/%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB.jpg" alt=""></p>
<h2 id="三、泛化关系"><a href="#三、泛化关系" class="headerlink" title="三、泛化关系"></a>三、泛化关系</h2><p>泛化(Generalization)关系也就是继承关系，用于描述父类与子类之间的关系，父类又称作基类或超类，子类又称作派生类。在UML中，泛化关系用带空心三角形的直线来表示。在代码实现时，我们使用面向对象的继承机制来实现泛化关系，如在Java语言中使用extends关键字、在C++/C#中使用冒号“：”来实现。例如：Student类和Teacher类都是Person类的子类，Student类和Teacher类继承了Person类的属性和方法，Person类的属性包含姓名(name)和年龄(age)，每一个Student和Teacher也都具有这两个属性，另外Student类增加了属性学号(studentNo)，Teacher类增加了属性教师编号(teacherNo)，Person类的方法包括行走move()和说话say()，Student类和Teacher类继承了这两个方法，而且Student类还新增方法study()，Teacher类还新增方法teach()</p>
<p>如下图<br><img src="http://ofy1hyquv.bkt.clouddn.com/%E6%B3%9B%E5%8C%96%E5%85%B3%E7%B3%BB.jpg" alt=""></p>
<h2 id="四、接口与实现关系"><a href="#四、接口与实现关系" class="headerlink" title="四、接口与实现关系"></a>四、接口与实现关系</h2><p>接口之间也可以有与类之间关系类似的继承关系和依赖关系，但是接口和类之间还存在一种实现(Realization)关系，在这种关系中，类实现了接口，类中的操作实现了接口中所声明的操作。在UML中，类与接口之间的实现关系用带空心三角形的虚线来表示。例如：定义了一个交通工具接口Vehicle，包含一个抽象操作move()，在类Ship和类Car中都实现了该move()操作，不过具体的实现细节将会不一样</p>
<p>如下图<br><img src="http://ofy1hyquv.bkt.clouddn.com/%E6%8E%A5%E5%8F%A3%E4%B8%8E%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB.jpg" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/08/iOS并发编程指南/" itemprop="url">
                  iOS并发编程指南
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-12-08T10:04:02+08:00" content="2016-12-08">
              2016-12-08
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/12/08/iOS并发编程指南/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/08/iOS并发编程指南/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近又看了下官方关于并发编程的文档，简单做一下总结。</p>
<h2 id="并发和程序设计"><a href="#并发和程序设计" class="headerlink" title="并发和程序设计"></a>并发和程序设计</h2><h3 id="并发编程的几个概念："><a href="#并发编程的几个概念：" class="headerlink" title="并发编程的几个概念："></a>并发编程的几个概念：</h3><p>-</p>
<p>并发：并发表示同时发生多件事情的概念</p>
<p>并行：并行是多个任务同时发生并且同时运行直到结束</p>
<p>-</p>
<p>同步：同步指函数运行时会阻塞当前线程一直运行结束</p>
<p>异步：异步指函数运行时不会阻塞当前线程</p>
<p>-</p>
<p>串行：当前队列中的任务是顺序执行的</p>
<p>并行: 当前队列中的任务是并发执行的，没有特定的顺序</p>
<p>-</p>
<h3 id="并发的优点和缺点"><a href="#并发的优点和缺点" class="headerlink" title="并发的优点和缺点"></a>并发的优点和缺点</h3><p>优点：</p>
<pre><code>•    充分发挥多核处理器优势，将不同线程任务分配给不同的处理器，真正进入“并行运算”状态
•    将耗时的任务分配到其他线程执行，由主线程负责统一更新界面会使应用程序更加流畅，用户体验更好
•    当硬件处理器的数量增加，程序会运行更快，而程序无需做任何调整
</code></pre><p>缺点：</p>
<pre><code>增加了开销，并增加了整体的代码的复杂性，使得代码更难编写和调试
</code></pre><p>使用并发编程之前，你应该分解出可执行的工作单元，并确定你需要的队列。</p>
<h2 id="Operation-Queues"><a href="#Operation-Queues" class="headerlink" title="Operation Queues"></a>Operation Queues</h2><p>NSOperation是一个面向对象的方式来封装要异步执行的工作，被设计成结合操作队列(NSOperationQueue)使用，也可以自己单独使用</p>
<p>子类：</p>
<p>Target/Action 方式初始化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NSInvocationOperation *invocationOperation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(doSomethingWithObj:) object:nil];</div></pre></td></tr></table></figure>
<p>Block方式初始化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">NSBlockOperation *blockOperation = [NSBlockOperation blockOperationWithBlock:^&#123;</div><div class="line">        //Do something here.</div><div class="line">    &#125;];</div></pre></td></tr></table></figure>
<p>所有的NSOperation对象支持以下特性:</p>
<p>1.设置依赖关系</p>
<p>2.设置完成块</p>
<p>3.使用KVO通知监听你的Operations执行状态改变</p>
<p>4.设置优先级</p>
<p>5.取消操作</p>
<h3 id="自定义Operation（默认start为非并发）"><a href="#自定义Operation（默认start为非并发）" class="headerlink" title="自定义Operation（默认start为非并发）"></a>自定义Operation（默认start为非并发）</h3><p>1.继承NSOperation基类</p>
<p>2.至少实现下面两个方法：</p>
<p>initialization</p>
<p>main</p>
<p>3.其他可添加的方法</p>
<p>自定义的在主函数调用的方法</p>
<p>数据的存取方法</p>
<p>NSCoding协议的方法</p>
<h3 id="并发执行的配置操作"><a href="#并发执行的配置操作" class="headerlink" title="并发执行的配置操作"></a>并发执行的配置操作</h3><p>1.重写isConcurrent函数并返回YES</p>
<p>2.重写start函数</p>
<p>3.重写isExecuting和isFinished函数</p>
<h3 id="NSOperation属性列表"><a href="#NSOperation属性列表" class="headerlink" title="NSOperation属性列表"></a>NSOperation属性列表</h3><p>isCancelled 是否取消</p>
<p>isConcurrent 是否并发</p>
<p>isExecuting 是否正在执行</p>
<p>isFinished 是否已经完成</p>
<p>isReady 是否准备好要执行</p>
<p>dependencies(array) 依赖关系数组</p>
<p>queuePriority 优先级</p>
<p>completionBlock 完成块</p>
<p>优先级:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">typedef NS_ENUM(NSInteger, NSOperationQueuePriority) &#123;</div><div class="line">	NSOperationQueuePriorityVeryLow = -8L,</div><div class="line">	NSOperationQueuePriorityLow = -4L,</div><div class="line">	NSOperationQueuePriorityNormal = 0,</div><div class="line">	NSOperationQueuePriorityHigh = 4,</div><div class="line">	NSOperationQueuePriorityVeryHigh = 8</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="Dispatch-Queues"><a href="#Dispatch-Queues" class="headerlink" title="Dispatch Queues"></a>Dispatch Queues</h2><h3 id="串行队列-创建一个线程"><a href="#串行队列-创建一个线程" class="headerlink" title="串行队列(创建一个线程)"></a>串行队列(创建一个线程)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dispatch_queue_t sQueue = dispatch_queue_create(&quot;这是串行队列&quot;, NULL);</div></pre></td></tr></table></figure>
<h3 id="并发队列-创建多个线程"><a href="#并发队列-创建多个线程" class="headerlink" title="并发队列(创建多个线程)"></a>并发队列(创建多个线程)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dispatch_queue_t cQueue = dispatch_queue_create(&quot;这是并发队列&quot;, DISPATCH_QUEUE_CONCURRENT);</div></pre></td></tr></table></figure>
<h3 id="主队列"><a href="#主队列" class="headerlink" title="主队列"></a>主队列</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dispatch_queue_t mQueue = dispatch_get_main_queue();</div></pre></td></tr></table></figure>
<h3 id="后台队列"><a href="#后台队列" class="headerlink" title="后台队列"></a>后台队列</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">dispatch_queue_t gQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);</div><div class="line"></div><div class="line">#define DISPATCH_QUEUE_PRIORITY_HIGH 2</div><div class="line">#define DISPATCH_QUEUE_PRIORITY_DEFAULT 0</div><div class="line">#define DISPATCH_QUEUE_PRIORITY_LOW (-2)</div><div class="line">#define DISPATCH_QUEUE_PRIORITY_BACKGROUND INT16_MIN</div></pre></td></tr></table></figure>
<h3 id="异步执行"><a href="#异步执行" class="headerlink" title="异步执行"></a>异步执行</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dispatch_async(dispatch_queue_t queue, dispatch_block_t block);</div></pre></td></tr></table></figure>
<h3 id="同步执行-不会开辟新的线程"><a href="#同步执行-不会开辟新的线程" class="headerlink" title="同步执行(不会开辟新的线程)"></a>同步执行(不会开辟新的线程)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dispatch_sync(dispatch_queue_t queue, DISPATCH_NOESCAPE dispatch_block_t block);</div></pre></td></tr></table></figure>
<p>以上可能有四种组合方式：</p>
<p>dispatch_sync + 串行队列 （串行执行）</p>
<p>dispatch_sync + 并发队列 （串行执行）</p>
<p>dispatch_async + 串行队列 （串行执行）</p>
<p>dispatch_async + 并发队列 （并行执行）</p>
<h3 id="Dispatch-Group"><a href="#Dispatch-Group" class="headerlink" title="Dispatch Group"></a>Dispatch Group</h3><p>将多个任务放到这个组里面，可以在所有的任务都结束后得到一个回调。</p>
<h3 id="dispatch-barrier-async-dispatch-queue-create"><a href="#dispatch-barrier-async-dispatch-queue-create" class="headerlink" title="dispatch_barrier_async + dispatch_queue_create()"></a>dispatch_barrier_async + dispatch_queue_create()</h3><p>使用时需要自己创建并发队列，不能使用后台队列。</p>
<h3 id="dispatch-apply"><a href="#dispatch-apply" class="headerlink" title="dispatch_apply"></a>dispatch_apply</h3><p>和dispatch_sync一样，是同步运行的，会阻塞当前线程。</p>
<h3 id="Dispatch-Semaphore"><a href="#Dispatch-Semaphore" class="headerlink" title="Dispatch Semaphore"></a>Dispatch Semaphore</h3><p>可以根据自己需要创建需要的signal数量，如果只创建一个则为串行执行。</p>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>循环引用</p>
<p>死锁</p>
<p>相关<a href="https://github.com/lilingyu0620/Concurrency-Programming-Guide.git" target="_blank" rel="external">demo</a></p>
<h2 id="END"><a href="#END" class="headerlink" title="- END -"></a>- END -</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/28/App-Programming-Guide-for-iOS/" itemprop="url">
                  App Programming Guide for iOS
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-11-28T11:44:25+08:00" content="2016-11-28">
              2016-11-28
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/11/28/App-Programming-Guide-for-iOS/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/11/28/App-Programming-Guide-for-iOS/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近看了下苹果官方文档这块，做一下总结。</p>
<h2 id="后台执行"><a href="#后台执行" class="headerlink" title="后台执行"></a>后台执行</h2><h3 id="一、短时间的后台执行"><a href="#一、短时间的后台执行" class="headerlink" title="一、短时间的后台执行"></a>一、短时间的后台执行</h3><p>1.使用 beginBackgroundTaskWithName 方法创建一个后台任务，具体代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">__block UIBackgroundTaskIdentifier bgTask = [application beginBackgroundTaskWithName:@&quot;MyTask&quot; expirationHandler:^&#123;</div><div class="line">       // Clean up any unfinished task business by marking where you</div><div class="line">       // stopped or ending the task outright.</div><div class="line">       [application endBackgroundTask:bgTask];</div><div class="line">       bgTask = UIBackgroundTaskInvalid;</div><div class="line">   &#125;];</div></pre></td></tr></table></figure>
<p>该任务可以在后台运行180秒的时间，UIApllication提供了字段<br>backgroundTimeRemaining获取当前剩余时间。</p>
<p>2.使用NSURLSession的后台下载任务，可以在后台继续下载一段时间。创建一个后台任务的代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">- (NSURLSession *)backgroundURLSession &#123;</div><div class="line">    static NSURLSession *session = nil;</div><div class="line">    static dispatch_once_t onceToken;</div><div class="line">    dispatch_once(&amp;onceToken, ^&#123;</div><div class="line">        NSString *identifier = @&quot;com.yourcompany.appId.BackgroundSession&quot;;</div><div class="line">        NSURLSessionConfiguration* sessionConfig = [NSURLSessionConfiguration backgroundSessionConfigurationWithIdentifier:identifier];</div><div class="line">        sessionConfig.sessionSendsLaunchEvents = YES;//默认是YES</div><div class="line">        sessionConfig.discretionary = YES;//性能相关</div><div class="line">defaultSessionConfiguration];</div><div class="line">        session = [NSURLSession sessionWithConfiguration:sessionConfig</div><div class="line">                                                delegate:self</div><div class="line">                                           delegateQueue:[NSOperationQueue mainQueue]];</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    return session;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="二、长时间的后台运行"><a href="#二、长时间的后台运行" class="headerlink" title="二、长时间的后台运行"></a>二、长时间的后台运行</h3><p>有些App需要长时间在后台运行的，比如音乐播放器 录音App 导航App (Voice over IP)VoipApp 外设App 大量后台下载任务类。。。需要在Xcode上做相应的设置才行，参考下面这个图，在Capabilities的Background Modes标签中勾选你想实现的功能。</p>
<p><img src="http://ofy1hyquv.bkt.clouddn.com/iosguide01.png" alt=""></p>
<h2 id="实现特定功能的策略"><a href="#实现特定功能的策略" class="headerlink" title="实现特定功能的策略"></a>实现特定功能的策略</h2><h3 id="一、隐私策略-使用磁盘加密保护数据"><a href="#一、隐私策略-使用磁盘加密保护数据" class="headerlink" title="一、隐私策略,使用磁盘加密保护数据"></a>一、隐私策略,使用磁盘加密保护数据</h3><p>使用NSData类设置保护等级。<br>当写入新文件时，你可以使用NSData的writeToFile:options:error:方法,具体实现如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">NSError *error = nil;</div><div class="line">[[NSData data] writeToFile:@&quot;文件需要写入的路径&quot; options:NSDataWritingAtomic error:&amp;error];</div></pre></td></tr></table></figure>
<p>options参数传入的即为文件的保护等级，具体枚举类型如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">typedef NS_OPTIONS(NSUInteger, NSDataWritingOptions) &#123;</div><div class="line">    NSDataWritingAtomic = 1UL &lt;&lt; 0,	//保存时提示使用辅助文件，相当于自动</div><div class="line">    NSDataWritingWithoutOverwriting,//提示,以防止覆盖现有的文件.不能和NSDataWritingAtomic合并使用。</div><div class="line">    NSDataWritingFileProtectionNone,//文件被加密但是当设备被锁屏时不能被密码保护</div><div class="line">    NSDataWritingFileProtectionComplete,//当设备被锁屏文件被加密且不能被访问   </div><div class="line">NSDataWritingFileProtectionCompleteUnlessOpen,//当设备被锁屏文件被加密且不能被访问，如果当文件被访问时设备锁屏，应用仍然可以在锁屏状态下访问文件.</div><div class="line">NSDataWritingFileProtectionCompleteUntilFirstUserAuthentication,//文件被加密且不能访问直到设备启动，用户解锁一次后。</div><div class="line">    NSDataWritingFileProtectionMask,</div><div class="line">    // Options with old names for NSData writing methods. Please stop using these old names.</div><div class="line">    NSAtomicWrite = NSDataWritingAtomic	    // Deprecated name for NSDataWritingAtomic</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>对于已存在的文件，你可以使用NSFileManager的setAttributes:ofItemAtPath:error:方法。具体实现如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[[NSFileManager defaultManager] setAttributes:@&#123;NSFileProtectionComplete:NSFileProtectionKey&#125; ofItemAtPath:@&quot;文件路径&quot; error:nil]</div></pre></td></tr></table></figure>
<p>NSFileManager的保护等级枚举值如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">NSFileProtectionNone //文件未受保护，随时可以问 （Default）</div><div class="line"></div><div class="line">NSFileProtectionComplete //文件受到保护，而且只有在设备未被锁定时才可访问</div><div class="line"></div><div class="line">NSFileProtectionCompleteUntilFirstUserAuthenticatio//文件受到保护，直到设备启动且用户第一次输入密码</div><div class="line"></div><div class="line">NSFileProtectionCompleteUnlessOpen//文件受到保护，而且只有在设备未被锁定时才可打开，不过即便在设备被锁定时，已经打开的文件还是可以继续使用和写入</div></pre></td></tr></table></figure>
<h3 id="二、区别每一个用户"><a href="#二、区别每一个用户" class="headerlink" title="二、区别每一个用户"></a>二、区别每一个用户</h3><p>区别每一个用户或者设备主要有下面几种方式实现：</p>
<p>1.账号密码方式</p>
<p>2.设备唯一标识符   [[UIDevice currentDevice]identifierForVendor]；App卸载后再安装，值不一样。</p>
<p>3.广告标识符NSString *adId = [[[ASIdentifierManager sharedManager] advertisingIdentifier] UUIDString];<br>重置系统，值会重新生成。</p>
<p>4.三方框架(OpenUDID)等</p>
<h3 id="三、尊重的限制（评级）"><a href="#三、尊重的限制（评级）" class="headerlink" title="三、尊重的限制（评级）"></a>三、尊重的限制（评级）</h3><p>每个App都会有一个评级，而且App所展示的内容也有对应的评级，如果评级不在允许的范围，则不能使用该内容。这个评级系统是USA的。</p>
<p><img src="http://ofy1hyquv.bkt.clouddn.com/iosguide02.png" alt=""></p>
<p><img src="http://ofy1hyquv.bkt.clouddn.com/iosguide03.png" alt=""></p>
<p>具体获取方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">BOOL isBooksAllow = [[NSUserDefaults standardUserDefaults] objectForKey:@&quot;com.apple.content-rating.ExplicitBooksAllowed&quot;];</div></pre></td></tr></table></figure>
<p>如果objectForKey返回为空，这意味着这个限制信息是不可用的。在这种情况下,您的应用程序可以使用自己的策略来确定适当的评级。</p>
<h3 id="四、保存当前App的状态"><a href="#四、保存当前App的状态" class="headerlink" title="四、保存当前App的状态"></a>四、保存当前App的状态</h3><p>实现appdelegate的下面两个代理，告诉系统你需要保存和恢复当前App的状态:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">- (BOOL) application:(UIApplication *)application shouldSaveApplicationState:(NSCoder *)coder &#123;</div><div class="line">    return YES;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (BOOL) application:(UIApplication *)application shouldRestoreApplicationState:(NSCoder *)coder &#123;</div><div class="line">    return YES;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>初始化每个VC的时候，需要为restorationIdentifier和restorationClass这两个字段赋值，否则，不能保存VC的状态。</p>
<p>具体保存和恢复过程如下：</p>
<p>保存过程：<br>1.告诉UIKit支持保存<br>2.告诉UIKit什么控制器和视图需要保存<br>3.给保存的对象编码</p>
<p>恢复过程:<br>1.告诉UIKit支持恢复<br>2.提供需要的UIKit对象<br>3.让保存的对象恢复原样</p>
<p>对应的每个VC需要遵守UIViewControllerRestoration,UIStateRestoring这两个协议，然后自己实现下面这3个方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">+ (nullable UIViewController *) viewControllerWithRestorationIdentifierPath:(NSArray *)identifierComponents coder:(NSCoder *)coder&#123;</div><div class="line">    UIViewController *vc = (UIViewController *)[UIApplication sharedApplication].delegate.window.rootViewController;</div><div class="line">    return vc;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)encodeRestorableStateWithCoder:(NSCoder *)coder</div><div class="line">&#123;</div><div class="line">    [coder encodeObject:self.progressLabel.text forKey:@&quot;LabelTextKey&quot;];</div><div class="line">    CGFloat progress = self.downloadProgress.progress;</div><div class="line">    [coder encodeObject:[NSString stringWithFormat:@&quot;%.2f&quot;,self.downloadProgress.progress] forKey:@&quot;ProgressKey&quot;];</div><div class="line">    [super encodeRestorableStateWithCoder:coder];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)decodeRestorableStateWithCoder:(NSCoder *)coder</div><div class="line">&#123;</div><div class="line">    NSString *string = [coder decodeObjectForKey:@&quot;LabelTextKey&quot;];</div><div class="line">    self.progressLabel.text = string;</div><div class="line">    CGFloat progress = [[coder decodeObjectForKey:@&quot;ProgressKey&quot;] floatValue];</div><div class="line">    self.downloadProgress.progress = progress;</div><div class="line">    [super decodeRestorableStateWithCoder:coder];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>下面是保存和恢复的流程图：</p>
<p>保存<br><img src="http://ofy1hyquv.bkt.clouddn.com/iosguide04.png" alt=""></p>
<p>恢复<br><img src="http://ofy1hyquv.bkt.clouddn.com/iosguide05.png" alt=""></p>
<h2 id="App之间的通信"><a href="#App之间的通信" class="headerlink" title="App之间的通信"></a>App之间的通信</h2><h3 id="一、AirDrop"><a href="#一、AirDrop" class="headerlink" title="一、AirDrop"></a>一、AirDrop</h3><p><img src="http://ofy1hyquv.bkt.clouddn.com/iosguide06.png" alt=""></p>
<p>创建一个UIActivityViewController实例即可实现airdrop功能，具体代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">    UIActivityViewController *activity = [[UIActivityViewController alloc] initWithActivityItems:@[[[NSBundle mainBundle] URLForResource:@&quot;Steve&quot; withExtension:@&quot;pdf&quot;]] applicationActivities:@[[[UIActivity alloc] init]]];</div><div class="line">    </div><div class="line">    // hide AirDrop</div><div class="line">//     activity.excludedActivityTypes = @[UIActivityTypeAirDrop];</div><div class="line">    </div><div class="line">    UIPopoverPresentationController *popover = activity.popoverPresentationController;</div><div class="line">    if (popover) &#123;</div><div class="line">        popover.sourceView = self.activityButton;</div><div class="line">        popover.permittedArrowDirections = UIPopoverArrowDirectionAny;</div><div class="line">    &#125;</div><div class="line">    //只能模态的显示</div><div class="line">    [self presentViewController:activity animated:YES completion:NULL];</div></pre></td></tr></table></figure>
<p>其中，excludedActivityTypes字段可以控制界面显示内容。</p>
<p>tips:因为 UIActivityViewController 只支持模态显示，在iPad上使用时，需要使用UIPopoverPresentationController设置显示样式。</p>
<h3 id="二、URL-Schemes"><a href="#二、URL-Schemes" class="headerlink" title="二、URL Schemes"></a>二、URL Schemes</h3><p>Schemes表示一个URL中最初始的位置即://之前的那段字符<br>比如<a href="http://www.apple.com这个网址的Schemes是http,支持浏览器打开。" target="_blank" rel="external">http://www.apple.com这个网址的Schemes是http,支持浏览器打开。</a></p>
<p>如果一个app设置了Url Schemes,则可以通过这个url从第三方打开该APP，并可以传递一些参数。<br>每个URL必须能唯一标识一个APP，如果Url Schemes发生冲突，则最后被安装的APP会被调用。</p>
<p>系统的APP的URL Schemes优先级最高。</p>
<p>PS: iOS9新增了一个白名单，苹果规定开发者只能设置50个 URL Schemes 来打开别的应用，在openurl之前要先用canOpenUrl判断URL是否能被打开，但是返回上一个App不需要判断，也不用设置白名单</p>
<h3 id="三、KeyChain"><a href="#三、KeyChain" class="headerlink" title="三、KeyChain"></a>三、KeyChain</h3><p>KeyChain是苹果提供的一种安全的保存用户名、密码、证书的方式，将敏感信息保存在keychain中后，这些信息不会随着app的卸载而丢失，除非开发人员在app中手动删除敏感信息，否则，这些信息将会一直保存在keychain中.</p>
<p>手机刷机或者恢复出厂后数据会丢失。</p>
<p>iOS10以后，使用KeyChain需要在Xcode的Capabilities中打开KeyChain权限，否则无法获取保存和读取数据的权限。</p>
<h3 id="四、UIPasteboard"><a href="#四、UIPasteboard" class="headerlink" title="四、UIPasteboard"></a>四、UIPasteboard</h3><p>粘贴板分为系统粘贴板和自定义粘贴板，自定义粘贴板只能同组的APP可以互相访问，系统的粘贴板所有的App都可以访问。</p>
<p>详见<a href="https://github.com/lilingyu0620/iOS-APP-Communication.git" target="_blank" rel="external">App之间的通信demo</a></p>
<h2 id="性能tips"><a href="#性能tips" class="headerlink" title="性能tips"></a>性能tips</h2><h3 id="一、像素混合"><a href="#一、像素混合" class="headerlink" title="一、像素混合"></a>一、像素混合</h3><p>当UILabel的背景色和父视图的背景色不一致，或者几个重叠的控件之间的背景色不一致时，会出现像素混合的问题，修改方法是将所有的控件背景色调为一致。</p>
<h3 id="二、离屏渲染"><a href="#二、离屏渲染" class="headerlink" title="二、离屏渲染"></a>二、离屏渲染</h3><p>给控件设置圆角的时候会出现离屏渲染的问题，如果是UIImageView，可以通过重画UIImage为圆形图片，再赋值给UIImageView的方式解决，具体代码参考如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">- (UIImage *)lly_drawRadiusWithRoundCorner:(CGFloat)radius andSize:(CGSize) size&#123;</div><div class="line"></div><div class="line">    CGRect rect = CGRectMake(0,0,size.width,size.height);</div><div class="line">    </div><div class="line">    UIGraphicsBeginImageContextWithOptions(rect.size, NO, [UIScreen mainScreen].scale);</div><div class="line">    CGContextAddPath(UIGraphicsGetCurrentContext(), [UIBezierPath bezierPathWithRoundedRect:rect byRoundingCorners:UIRectCornerAllCorners cornerRadii:CGSizeMake(radius, radius)].CGPath);</div><div class="line">    CGContextClip(UIGraphicsGetCurrentContext());</div><div class="line">    </div><div class="line">    [self drawInRect:rect];</div><div class="line">    </div><div class="line">    CGContextDrawPath(UIGraphicsGetCurrentContext(), kCGPathFillStroke);</div><div class="line">    </div><div class="line">    UIImage *output = UIGraphicsGetImageFromCurrentImageContext();</div><div class="line">    </div><div class="line">    UIGraphicsEndImageContext();</div><div class="line">    </div><div class="line">    return  output;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="–-END-–"><a href="#–-END-–" class="headerlink" title="– END –"></a>– END –</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/11/菲李莫属隐私政策/" itemprop="url">
                  菲李莫属隐私政策
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-11T09:44:14+08:00" content="2016-10-11">
              2016-10-11
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/10/11/菲李莫属隐私政策/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/11/菲李莫属隐私政策/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>个人信息保护政策</p>
<p>为切实保护菲李莫属用户隐私权，优化用户体验，我公司根据现行法规及政策，制定本《个人信息保护政策》。 本《个人信息保护政策》将详细说明菲李莫属在获取、管理及保护用户个人信息方面的政策及措施。本《个人信息保护政策》适用于菲李莫属向您提供的所有服务，无论您是通过计算机设备、移动终端或其他设备获得的菲李莫属服务。</p>
<p>个人信息的收集</p>
<p>您已知悉且同意，在您注册菲李莫属帐号或使用菲李莫属提供的服务时，菲李莫属将记录您提供的相关个人信息，如：姓名、手机号码等，上述个人信息是您获得菲李莫属提供服务的基础。同时，基于优化用户体验之目的，菲李莫属会获取与提升菲李莫属服务有关的其他信息，例如当您访问菲李莫属时，我们可能会收集哪些服务的受欢迎程度、浏览器软件信息等以便优化我们的服务。</p>
<p>个人信息的管理</p>
<p>为了向您提供更好的服务或产品，菲李莫属会在下述情形使用您的个人信息：<br>1）根据相关法律法规的要求；<br>2）根据您的授权；<br>3）根据菲李莫属相关服务条款、应用许可使用协议的约定。</p>
<p>此外，您已知悉并同意：在现行法律法规允许的范围内，菲李莫属可能会将您非隐私的个人信息用于市场营销，使用方式包括但不限于：在菲李莫属平台中向您展示或提供广告和促销资料，向您通告或推荐菲李莫属的服务或产品信息，以及其他此类根据您使用菲李莫属服务或产品的情况所认为您可能会感兴趣的信息。其中也包括您在采取授权等某动作时选择分享的信息，例如当您新增朋友、在动态中新增地标、使用菲李莫属的联络人汇入工具等。</p>
<p>未经您本人允许，菲李莫属不会向任何第三方披露您的个人信息，下列情形除外：<br>1）菲李莫属已经取得您或您监护人的授权；<br>2）司法机关或行政机关给予法定程序要求菲李莫属披露的；<br>3）菲李莫属为维护自身合法权益而向用户提起诉讼或仲裁时；<br>4）根据您与菲李莫属相关服务条款、应用许可使用协议的约定；<br>5）法律法规规定的其他情形。</p>
<p>个人信息的保护</p>
<p>菲李莫属将尽一切合理努力保护其获得的用户个人信息。为防止用户个人信息在意外的、未经授权的情况下被非法访问、复制、修改、传送、遗失、破坏、处理或使用，菲李莫属已经并将继续采取以下措施保护您的个人信息：<br>1）以适当的方式对用户的个人信息进行加密处理；<br>2）在适当的位置使用密码对用户个人信息进行保护；<br>3）限制对用户个人信息的访问；<br>4）其他的合理措施。</p>
<p>尽管已经采取了上述合理有效措施，并已经遵守了相关法律规定要求的标准，但菲李莫属仍然无法保证您的个人信息通过不安全途径进行交流时的安全性。因此，用户个人应采取积极措施保证个人信息的安全，如：定期修改帐号密码，不将自己的帐号密码等个人信息透露给他人。</p>
<p>您知悉：菲李莫属提供的个人信息保护措施仅适用于菲李莫属平台，一旦您离开菲李莫属，浏览或使用其他网站、服务及内容资源，菲李莫属即没有能力及义务保护您在菲李莫属以外的网站提交的任何个人信息，无论您登陆或浏览上述网站是否基于菲李莫属的链接或引导。</p>
<p>个人信息的访问</p>
<p>当您完成菲李莫属的帐号注册后，您可以查阅或修改您提交给菲李莫属的个人信息。一般情况下，您可随时浏览、修改自己提交的信息，但出于安全性和身份识别（如号码申诉服务）的考虑，您可能无法修改注册时提供的某些初始注册信息及验证信息。</p>
<p>对未成年人个人信息的特别保护<br>菲李莫属非常重视对未成年人个人信息的保护。若您是18周岁以下的未成年人，在使用菲李莫属的服务前，应确保事先取得监护人的同意，如您在菲李莫属上申请注册账号，菲李莫属将默认为您已得到前述同意。菲李莫属将根据国家相关法律法规及本《个人信息保护政策》的规定保护未成年人的个人信息。</p>
<p>隐私保护政策的修改</p>
<p>菲李莫属有权随时修改《个人信息保护政策》的任何条款，一旦《个人信息保护政策》的内容发生变动，菲李莫属将会直接在网站上公布修改之后的《个人信息保护政策》，该公布行为视为菲李莫属已经通知您修改内容。菲李莫属也可通过其他适当方式向用户提示修改内容。如果您不同意菲李莫属对本《个人信息保护政策》相关条款所做的修改，您有权停止使用菲李莫属服务。如果您继续使用菲李莫属服务，则视为您接受本公司对本协议相关条款所做的修改。</p>
<pre><code>菲李莫属 ©llyblog.com 10-11 09:39
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/14/仿映客直播app/" itemprop="url">
                  仿映客直播app
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-14T16:35:59+08:00" content="2016-09-14">
              2016-09-14
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/14/仿映客直播app/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/14/仿映客直播app/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>先看看demo效果，我用的Gif brewery3制作的gif,导出格式好大，只好压缩尺寸和帧率了。。。</p>
<p><img src="http://ww1.sinaimg.cn/large/763206fdjw1f7t8sb8v4rg209r0hsnph.gif" alt=""></p>
<p><img src="http://ww1.sinaimg.cn/large/763206fdjw1f7t8ssc0sag209r0hskjv.gif" alt=""></p>
<p>直播相关的资料我就不在这里详细介绍了，网上资料特别多，搭建本地服务器，获取视频流和音频流，推流和拉流，播放器等等…</p>
<p>先说说下面这个tabbar吧 这个是我自定义的一个，继承了UITabbarController 然后手动调整高度为60 设置背景图的时候需要把图片模式设置为拉伸模式（UIImageResizingModeStretch），中间圆形按钮也需要手动添加一个uibutton,注意设置中心点在tabbar中心位置。</p>
<p>接口是通过Charles抓取的，图片资源在mac上下载映客ipa然后导出既可。</p>
<p>项目中的直播流播放器是用的开源项目KxMovie做的，把它的界面稍微改了一下，网上有很多类似demo都用的ijkplayer，我也下载这些demo跑过，延迟不是一般的高，至少10s以上，完全无法忍受。。。</p>
<p>点赞效果是我以前没事自己写的一个<a href="https://github.com/lilingyu0620/dianzanDemo.git" target="_blank" rel="external">小demo</a> 集成进来的</p>
<p>弹幕效果也是用的第三方开源项目BarrageRenderer</p>
<p><a href="https://github.com/lilingyu0620/InKeDemo.git" target="_blank" rel="external">demo在这里</a>，欢迎下载。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/01/iOS卡片控件的实现/" itemprop="url">
                  iOS卡片控件的实现
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-01T13:59:01+08:00" content="2016-09-01">
              2016-09-01
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/01/iOS卡片控件的实现/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/01/iOS卡片控件的实现/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>###需求<br><img src="http://ww3.sinaimg.cn/large/763206fdjw1f7e20ldzxeg20pw0f87jh.gif" alt="CardPageDemo"></p>
<p>最近公司给了个需求，实现上面卡片效果，这种控件网上也有现成的<a href="http://www.jianshu.com/p/6af5fb818b5d" target="_blank" rel="external">demo</a>，但有些地方还是要自己研究下才能满足使用，下面记录一下我的研究成果。</p>
<p>1.使用UICollectionView控件。</p>
<p>如果这是单纯的轮播图片，使用UIScrollView就可以满足需要，但是上面的效果有缩放还有渐变，用UIScrollView的话代码量大，实现比较复杂，而且数据处理起来也没有用UICollectionView方便，这里再放一个用UIScrollView实现的<a href="https://github.com/kejinlu/KKPagedFlowView" target="_blank" rel="external">demo</a>,有需要的可以对比一下。</p>
<p>2.自定义UICollecionViewFlowLayout类。</p>
<p>使用过UICollectionView的同学们对这个类应该都不陌生吧，瀑布流布局类，可以通过自定义这个类实现各种瀑布流的效果，我要实现的这个效果当然也是需要自定义这个类了。</p>
<p>先来看看prepareLayout这个函数的实现吧，这个是布局初始化的时候调用的，可以在这个函数里面自定义每一个cell的大小，cell之间的间距等属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">- (void)prepareLayout&#123;</div><div class="line">    </div><div class="line">    [super prepareLayout];</div><div class="line">    //滑动方向</div><div class="line">    self.scrollDirection = UICollectionViewScrollDirectionHorizontal;</div><div class="line">    //两个cell的间距</div><div class="line">    self.minimumLineSpacing = kLineSpace;</div><div class="line">    //计算cell超出显示的宽度</div><div class="line">    CGFloat width = ((self.collectionView.frame.size.width - kPageCardWidth)-(kLineSpace*2))/2;</div><div class="line">    //第一个cell和最后一个cell相对于屏幕的偏移</div><div class="line">    self.sectionInset = UIEdgeInsetsMake(0, kLineSpace+width, 0, kLineSpace+width);</div><div class="line">    //每个cell实际的大小</div><div class="line">    self.itemSize = CGSizeMake(kPageCardWidth,kPageCardHeight);</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>结合下面这两张图片，几个属性的关系就很清楚了:</p>
<p>首尾cell<br><img src="http://ww1.sinaimg.cn/large/763206fdjw1f7e3nzupk6j20pp0gwt9k.jpg" alt="首尾cell"></p>
<p>中间cell<br><img src="http://ww2.sinaimg.cn/large/763206fdjw1f7nbwdjtqyj20pw0glwfe.jpg" alt="中间cell"></p>
<p>要保证每一次cell滑动之后都能精确的移动到屏幕的中间，就必须计算出图上标的这几个参数的值，这里有两种情况：</p>
<p>1.cell宽度固定。</p>
<p>当cell的宽度是一个常量，两个cell之间的间距（minimumLineSpacing）一般都是不变的，很容易计算出前后两个cell超出显示在屏幕上的宽度 CGFloat width = ((self.collectionView.frame.size.width - kPageCardWidth)-(kLineSpace*2))/2;（参考中间cell这张图），首尾情况时，只要让sectionInset左右的偏移量 ＝ width＋minimumLineSpacing，左右的空白宽度等于了另一边的非空白的宽度（参考首尾cell这张图），这样无论滑到哪个cell，就能精确计算出移动到屏幕中间所需要的偏移量了。</p>
<p>2.前后cell超出显示在屏幕上的宽度（图中的width）固定。<br> 这种情况就要根据屏幕宽度计算出cell的宽度kPageCardWidth = self.collectionView.frame.size.width - (kLineSpace x 2) -(width x 2); sectionInset左右的偏移量计算方法和第一种情况一样。</p>
<p>我这里的cell的宽度是固定值，所以计算起来相对简单，如果要让每个cell都在屏幕的中心点，对于第一个cell，只需要sectionInset左右边的偏移量 = width + minimumLineSpacing。</p>
<p>而对于后面的cell，则需要通过控制每一次滑动后当前显示cell的中心坐标。这个坐标当然是有方法来返回的，看下面这个函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">- (CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset withScrollingVelocity:(CGPoint)velocity &#123;</div><div class="line">    // 分页以1/3处</div><div class="line">    if (proposedContentOffset.x &gt; self.previousOffsetX + self.itemSize.width / 3.0) &#123;</div><div class="line">        self.previousOffsetX += kPageCardWidth+kLineSpace ;</div><div class="line">        self.pageNum = self.previousOffsetX/(kPageCardWidth+kLineSpace);</div><div class="line">        if ([self.delegate respondsToSelector:@selector(scrollToPageIndex:)]) &#123;</div><div class="line">            [self.delegate scrollToPageIndex:self.pageNum];</div><div class="line">        &#125;</div><div class="line">    &#125; else if (proposedContentOffset.x &lt; self.previousOffsetX  - self.itemSize.width / 3.0) &#123;</div><div class="line">        self.previousOffsetX -= kPageCardWidth+kLineSpace;</div><div class="line">        self.pageNum = self.previousOffsetX/(kPageCardWidth+kLineSpace);</div><div class="line">        if ([self.delegate respondsToSelector:@selector(scrollToPageIndex:)]) &#123;</div><div class="line">            [self.delegate scrollToPageIndex:self.pageNum];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    //将当前cell移动到屏幕中间位置</div><div class="line">    proposedContentOffset.x = self.previousOffsetX;</div><div class="line">    </div><div class="line">    return proposedContentOffset;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这个函数返回当前cell的中心点移动到哪个坐标点。</p>
<p>以第一个cell为基准（第一个cell已经在屏幕的中心），后面的每一个cell如果要移动到屏幕中心，X方向上的位移应该为2个cell中心点之前的距离，即previousOffsetX = kPageCardWidth（cell的宽度）+kLineSpace（2个cell的间距）。</p>
<p>OK，完成了一半了，然后就是缩放和渐变。</p>
<p>直接上代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">- (NSArray&lt;UICollectionViewLayoutAttributes *&gt; *)layoutAttributesForElementsInRect:(CGRect)rect &#123;</div><div class="line">    NSArray *superAttributes = [super layoutAttributesForElementsInRect:rect];</div><div class="line">    NSArray *attributes = [[NSArray alloc] initWithArray:superAttributes copyItems:YES];</div><div class="line">    </div><div class="line">    CGRect visibleRect = CGRectMake(self.collectionView.contentOffset.x,</div><div class="line">                                    self.collectionView.contentOffset.y,</div><div class="line">                                    self.collectionView.frame.size.width,</div><div class="line">                                    self.collectionView.frame.size.height);</div><div class="line">    CGFloat offset = CGRectGetMidX(visibleRect);</div><div class="line">    </div><div class="line">    [attributes enumerateObjectsUsingBlock:^(UICollectionViewLayoutAttributes *attribute, NSUInteger idx, BOOL * _Nonnull stop) &#123;</div><div class="line">        CGFloat distance = offset - attribute.center.x;</div><div class="line">        // 越往中心移动，值越小，那么缩放就越小，从而显示就越大</div><div class="line">        // 同样，超过中心后，越往左、右走，缩放就越大，显示就越小</div><div class="line">        CGFloat scaleForDistance = distance / self.itemSize.width;</div><div class="line">        // 0.1可调整，值越大，显示就越大</div><div class="line">        CGFloat scaleForCell = 1 + 0.1 * (1 - fabs(scaleForDistance));</div><div class="line">        </div><div class="line">        //只在Y轴方向做缩放</div><div class="line">        attribute.transform3D =  CATransform3DMakeScale(1, scaleForCell, 1);</div><div class="line">        attribute.zIndex = 1;</div><div class="line">        </div><div class="line">        //渐变</div><div class="line">        CGFloat scaleForAlpha = 1 - fabsf(scaleForDistance)*0.4;</div><div class="line">        attribute.alpha = scaleForAlpha;</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    return attributes;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面这个函数返回一个UICollectionViewLayoutAttributes *类型的数组，简单点说就是滑动过程中动态计算每一个cell的属性然后传给UICollectionView显示出来，在这里动态修改每个cell的属性，显示的结果就是渐变和动画的效果了,具体可参考代码注释。根据位移控制好属性改变的系数即可。</p>
<hr>
<p>###补充需求－－轮播</p>
<p><img src="http://ww3.sinaimg.cn/large/763206fdjw1f7ndvj1t0xg20hw0doazp.gif" alt="轮播"></p>
<p>还是原来的配方，还是熟悉的问题，轮播还是用的前后各加一个数据源的方式实现。具体参考我下面的demo。</p>
<p>这里我总结一下，如果要让轮播的过度看上去不那么明显应该注意两点：</p>
<p>1.应该让 前后cell超出显示在屏幕上的宽度（图中的width）固定 即上面说的第二种情况，且width的大小不宜过大。</p>
<p>2.cell的背景色和UICollectionView的背景色色差不宜过大。</p>
<hr>
<p>###轮播补充<br>上面这种实现方式在处理最后一张到第一张的衔接的时候效果不太好，最近研究了下，比较好的实现方式是放多个section，初始化的时候手动滚动到中间section，每个section内容相同，这样在滑动的时候就不会出现上面跳一下的问题。这里要注意的就是处理好每个section之间的间距问题，具体参考我的demo。<br>新demo的效果如下：<br><img src="http://ofy1hyquv.bkt.clouddn.com/%E8%BD%AE%E6%92%AD.gif" alt="轮播"></p>
<p><a href="https://github.com/lilingyu0620/PageCardDemo" target="_blank" rel="external">这里是我的demo，请下载</a>。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/30/个人博客的搭建/" itemprop="url">
                  个人博客的搭建
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-30T14:56:54+08:00" content="2016-08-30">
              2016-08-30
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/30/个人博客的搭建/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/30/个人博客的搭建/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>如何搭建一个自己的博客呢？<br>看<a href="http://dukecuichen.com/2016/04/08/基于Hexo框架-GitHub-Pages搭建个人博客/" target="_blank" rel="external">这一篇文章</a>就够了。</p>
<p>##补充：</p>
<p>1.安装Node.js的时候出现问题,直接从官网下载的安装包安装后没用，这个时候可以选择通过命令行来安装，参考<a href="https://hexo.io/docs/" target="_blank" rel="external">这篇文章</a>,通过命令行安装的时候还是会有问题，目录不存在的问题，解决方法在<a href="http://stackoverflow.com/questions/16904658/node-version-manager-install-nvm-command-not-found" target="_blank" rel="external">这里</a> 。</p>
<p>  2.配置SSH-Key的一般步骤很简单，网上有很多教程，随手搬<a href="http://blog.csdn.net/hustpzb/article/details/8230454/" target="_blank" rel="external">这篇</a>过来,这是配置一个账号的，如果你同时拥有多个账号（比如公司一个账号，自己还有一个账号），可以参考<a href="http://www.jianshu.com/p/f7f4142a1556" target="_blank" rel="external">这一篇文章</a>。</p>
<p>  3.使用过程中可能对markdown语法不太熟悉的小伙伴，可以看看<a href="http://www.jianshu.com/p/1e402922ee32/" target="_blank" rel="external">这一篇文章</a>.</p>
<p>  以上是我在搭建自己的个人博客时遇到的问题，做一下记录，方便后来者。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/head.png"
               alt="lly" />
          <p class="site-author-name" itemprop="name">lly</p>
          <p class="site-description motion-element" itemprop="description">耿直的一Boy</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">17</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lly</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"llyblog"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  

  

  

  

</body>
</html>
